- name: Download FNM
  ansible.builtin.get_url: 
    url: https://fnm.vercel.app/install
    dest: /usr/local/bin/fnm-install.sh
  tags: 
    - install
    - node

- name: Install FNM
  ansible.builtin.shell: 
    cmd: cat /usr/local/bin/fnm-install.sh | bash -s -- --skip-shell
  tags: 
    - install
    - node

- name: Cleanup FNM Install Script
  ansible.builtin.file:
    path: /usr/local/bin/fnm-install.sh 
    state: absent
  tags: 
    - install
    - node

- name: Install Current LTS Node Version
  ansible.builtin.shell: 
    cmd: zsh -ic "fnm install {{ node_lts }}" 
  tags: 
    - install
    - node

- name: Instruct FNM To Use Node LTS Version
  ansible.builtin.shell: 
    cmd: zsh -ic "fnm use {{ node_lts }}" 
  tags: 
    - install
    - node
